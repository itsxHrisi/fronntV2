<!-- src/app/componentes_global/change-password/change-password.component.html -->
<div class="container">
  <!-- (opcional) Logo superior -->
  <div class="image-section2">
    <img id="fotoHeader" src="LETRAS_LOGO_editado-removebg-preview.png" alt="FM Logo">
  </div>

  <div class="login-box">
    <form #changeForm="ngForm" (ngSubmit)="onSubmit()">
      <h2>Cambiar contraseña</h2>

      <!-- Nueva contraseña -->
      <div class="input-group">
        <label for="newPassword">Nueva contraseña</label>
        <input
          type="password"
          id="newPassword"
          name="newPassword"
          [(ngModel)]="newPassword"
          #np="ngModel"
          required
          pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[^\w\s]).{8,}$"
        />
        <div *ngIf="(changeForm.submitted || np.touched) && np.errors" class="invalid-feedback">
          <div *ngIf="np.errors['required']">
            La contraseña es obligatoria.
          </div>
          <div *ngIf="np.errors['pattern']">
            Debe tener al menos 8 caracteres, una mayúscula, una minúscula, un número y un símbolo.
          </div>
        </div>
      </div>

      <!-- Confirmar nueva contraseña -->
      <div class="input-group">
        <label for="confirmPassword">Repite contraseña</label>
        <input
          type="password"
          id="confirmPassword"
          name="confirmPassword"
          [(ngModel)]="confirmPassword"
          #cp="ngModel"
          required
        />
        <div *ngIf="(changeForm.submitted || cp.touched) && cp.errors?.['required']" class="invalid-feedback">
          Debes repetir la contraseña.
        </div>
      </div>

      <!-- Error / éxito -->
      <div *ngIf="errorMsg" class="invalid-feedback">{{ errorMsg }}</div>
      <div *ngIf="successMsg" class="alert alert-success">{{ successMsg }}</div>

      <!-- Botones -->
      <button type="submit" class="login-button" [disabled]="changeForm.invalid">
        Cambiar contraseña
      </button>
      <button type="button" class="login-button" (click)="onCancel()">
        Cancelar
      </button>
    </form>
  </div>

  <!-- (opcional) Logo inferior -->
  <div class="image-section">
    <img id="fotoHeader" src="LETRAS_LOGO_editado-removebg-preview.png" alt="FM Logo">
  </div>
</div>
